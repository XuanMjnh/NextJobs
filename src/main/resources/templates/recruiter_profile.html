<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <link th:rel="stylesheet" th:href="@{/webjars/bootstrap/css/bootstrap.min.css} "/>
    <link rel="stylesheet" type="text/css" media="all"  th:href="@{/css/font-awesome.min.css}" />
    <link rel="stylesheet" type="text/css" media="all"  th:href="@{/css/style.css}" />
    <link rel="stylesheet" type="text/css" media="all"  th:href="@{/css/styles.css}" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Profile Setup</title>
</head>

<body class="background">
<div>
    <label class="mt-4 ms-5">
        <a th:href="@{/dashboard/}"
           class="btn fw-bold"
           style="background-color: #164081; color: white; border: none;">
            NextJobs
        </a>
    </label>
</div>
<div class="add-job-container">

    <div class="profile-container shadow-effect">
        <div class="add-job-title"><h2>Thông tin cá nhân</h2></div>
        <form id="job-main-form" th:action="@{/recruiter-profile/addNew}" th:object="${profile}" method="post" enctype="multipart/form-data"
        >
            <div class="add-row">
                <div class="add-row-title">Họ và Tên</div>
                <div class="add-row-row">
                    <input placeholder="Họ" id="firstName" th:field="*{firstName}"  name="firstName"  type="text" class="form-control"  />
                    <input placeholder="Tên" id="lastName" name="lastName" th:field="*{lastName}" type="text" class="form-control"  />
                </div>

            </div>

            <div class="add-row">
                <div class="add-row-title">Địa chỉ</div>
                <div class="add-row-row">
                    <input th:field="*{city}" id="city" type="text"  class="form-control" placeholder="Địa chỉ">
                    <input id="state" th:field="*{state}" type="text"  class="form-control" placeholder="Xã/phường">
                    <input id="country" th:field="*{country}" type="text"  class="form-control" placeholder="Tỉnh/thành phố">
                </div>
            </div>
            <div class="add-row">
                <div class="add-row-title">Công ty</div>
                <div class="add-row-row">
                    <input placeholder="Công ty" id="company" name="company" th:field="*{company}" type="text" class="form-control"  />
                </div>
            </div>

            <div class="add-row">
                <div class="add-row-title">Ảnh đại diện</div>

                <div class="add-row-row">
                    <input id="image" type="file" name="image" class="form-control" accept="image/png, image/jpeg" style="display:none;">
                    <input th:field="*{profilePhoto}" type="hidden" class="form-control" />
                </div>

                <!-- Hiển thị ảnh xem trước -->
                <div class="add-row-row">
                    <img id="logoPreview"
                         th:if="*{profilePhoto} != null"
                         th:src="@{'/photos/recruiter/' + ${profile.userAccountId} + '/' + ${profile.profilePhoto}}"
                         alt="Ảnh đại diện"
                         style="display:block; margin-top:10px; max-height:120px; border-radius:8px;">

                    <img th:if="*{profilePhoto} == null"
                         id="logoPreviewPlaceholder"
                         src="#"
                         alt="Chưa có ảnh"
                         style="display:none; margin-top:10px; max-height:120px; border-radius:8px;">
                </div>
                <label for="image" class="btn btn-outline-secondary" style="margin-top: 10px">Cập nhật ảnh</label>
            </div>

            <button type="submit" name="submit" class="myBtn btn-save">Lưu</button>
        </form>
    </div>
</div>
</body>
<script type="text/javascript" th:src="@{/webjars/jquery/jquery.min.js}"></script>
<script type="text/javascript" th:src="@{/webjars/popper.js/umd/popper.min.js}"></script>
<script type="text/javascript" th:src="@{/webjars/bootstrap/js/bootstrap.min.js}"></script>
<script type="text/javascript" th:src="@{/js/main.js}"></script>

<script>
    const fileInput = document.getElementById('image');
    const previewImg = document.getElementById('logoPreview');

    fileInput.addEventListener('change', function () {
        const file = this.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
                previewImg.src = e.target.result;
                previewImg.style.display = 'block';
            };
            reader.readAsDataURL(file);
        } else {
            previewImg.style.display = 'none';
            previewImg.src = '#';
        }
    });
</script>
</html>
